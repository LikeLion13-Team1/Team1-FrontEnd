<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Qfinal</title>
    <link rel="stylesheet" href="../styles/global.css" />
    <link rel="stylesheet" href="../styles/header.css" />
    <link rel="stylesheet" href="../styles/sidebar.css" />
    <link rel="stylesheet" href="../styles/Q.css" />
    <link rel="stylesheet" href="../styles/Q2.css" />
    <link rel="stylesheet" href="../styles/Qfinal.css" />
  </head>
  <body class="home2-page" data-question-key="routin">
    <header class="main-header">
      <div id="header"></div>
    </header>
    <div class="main">
      <aside class="aside">
        <div id="sidebar"></div>
      </aside>
      <section class="content">
        <div class="text">
          <p class="text1">고민 끝에 살리미가 결정한 루틴은 ~</p>
          <p class="text2">매일 아침 저녁 정리 루틴 세트</p>
          <p class="text3">
            매일이 갓생, 당신의 생활 스타일에 꼭 맞는 루틴이에요 :)
          </p>
          <p class="text4">
            멋사님께서 선택하신 <span class="highlight">루틴1</span>에 쏙
            넣어드렸어요!
          </p>
          <p class="text5">
            <span class="highlight">루틴1</span>에서 확인해 보세요.
          </p>
          <button class="baro-btn">루틴1 바로가기</button>
        </div>
      </section>
    </div>
    <script type="module" src="../js/auth/authCheck.js"></script>
    <script type="module">
      import { loadHeader } from "../js/loadHeader.js";
      loadHeader();
      import { loadSidebar } from "../js/loadSidebar.js";
      loadSidebar();

      document.addEventListener("DOMContentLoaded", () => {
        const answers = JSON.parse(localStorage.getItem("surveyAnswers")) || {};
        const routine = answers.routin || "루틴1"; // 기본값

        // 루틴 이름을 숫자 groupId로 매핑
        const routineToGroupIdMap = {
          루틴1: 1,
          루틴2: 2,
          루틴3: 3,
          // 필요시 계속 확장 가능
        };

        const groupId = routineToGroupIdMap[routine] || 1; // 기본값 fallback

        // HTML에 텍스트 적용
        document.querySelectorAll(".highlight").forEach((el) => {
          el.textContent = routine;
        });

        const baroBtn = document.querySelector(".baro-btn");
        baroBtn.textContent = `${routine} 바로가기`;
        baroBtn.addEventListener("click", () => {
          window.location.href = `../pages/routineset.html?groupId=${groupId}`;
        });
      });
    </script>
  </body>
</html>
